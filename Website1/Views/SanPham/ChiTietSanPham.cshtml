@model Website1.Models.products
@{
    ViewBag.Title = "Chi tiết sản phẩm";
    Layout = "~/Views/Shared/layout.cshtml";

    
 
}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script type="text/javascript">
    $(function () {
        $("#addtocart").click(function () {
            var model = {};
            //lấy id sản phẩm
            model.Id = @Model.id;
            // lấy số lượng đặt hàng
            model.Quantity = $("#ipQuantity").val();
            model.Size = $("#ipSize").val();
            debugger;
            $.ajax({
                type: "POST",
                url: '@Url.Action("AddToCart", "Cart")',
                data:  JSON.stringify(model) ,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function () {
                    alert("Thêm giỏ hàng thành công!")
                    $('#CartCount').text(@Session["count"] + 1);
                },
                error: function () {
                    alert("Lỗi trong khi thêm vào giỏ hàng!");
                }
            });
            return false;
        });
    });
</script>
@if (Model == null)
{
    <h1>Sản phẩm không tồn tại</h1>
}
else
{
    <div class="small-container single-product">
        <div class="row">
            <div class="col-2">
                <img src="~/assets/images/@Model.pro_avatar" width="100%" id="ProductImg">

                <div class="small-img-row">
                    <div class="small-img-col">
                        <img src="~/assets/images/gallery-1.jpg" width="100%" class="small-img">
                    </div>
                    <div class="small-img-col">
                        <img src="~/assets/images/gallery-2.jpg" width="100%" class="small-img">
                    </div>
                    <div class="small-img-col">
                        <img src="~/assets/images/gallery-3.jpg" width="100%" class="small-img">
                    </div>
                    <div class="small-img-col">
                        <img src="~/assets/images/gallery-4.jpg" width="100%" class="small-img">
                    </div>
                </div>

            </div>
            <div class="col-2">
                <p>Home / Shoes</p>
                <h1>@Model.pro_name</h1>
                <h4>@string.Format("{0:#,0}", Model.final_price) vnđ</h4>
                @*<h4>@Model.pro_size</h4>*@

                @*<select>
                    <option>Size</option>
                    <option>XXL</option>
                    <option>XL</option>
                    <option>L</option>
                    <option>M</option>
                    <option>S</option>
                </select>*@
                @*<input type="number" value="1">
        <a href="~/User/Cart" class="btn">Add To Cart</a>*@
                <div class="form-row  mt-4">
                    <div class="form-group col-md flex-grow-0">
                        <div class="input-group mb-3 input-spinner">
                            @*<input type="text" list="ipSize" class="form-control"  name="" />
        <datalist id="ipSize">
            <option value="XXL">
            <option value="XL">
            <option value="L">
            <option value="M">
            <option value="S">

        </datalist>*@
                            <select name="bookName" id="ipSize" class="form-control">
                                <option value="XXL">XXL</option>
                                <option value="XL">XL</option>
                                <option value="L">L</option>
                                <option value="M">M</option>
                                <option value="S">S</option>
                            </select>

                            <input type="text" id="ipQuantity" class="form-control" value="1">
                        </div>
                    </div> <!-- col.// -->
                    <div class="form-group col-md">
                        <a href="#" id="addtocart" class="btn  btn-primary">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="text" h>Thêm vào giỏ hàng</span>
                        </a>
                    </div> <!-- col.// -->
                </div> <!-- row.// -->
                <h3>Chi tiết sản phẩm<i class="fa fa-indent"></i></h3>
                <br>
                <p>"@Model.pro_description"</p>
            </div>
        </div>
    </div>
}



<div class="small-container">
    <div class="row row-2">
        <h2>Related Products</h2>
        <p>View more</p>
    </div>
</div>




<div class="small-container">

    <div class="row">
        <div class="col-4">
            <img src="~/assets/images/product-9.jpg" alt="">
            <h4>Red Printed Tshirt</h4>
            <div class="rating">
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star-o"></i>
            </div>
            <p>$50.00</p>
        </div>
        <div class="col-4">
            <img src="~/assets/images/product-10.jpg" alt="">
            <h4>Red Printed Tshirt</h4>
            <div class="rating">
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star-half-o"></i>
            </div>
            <p>$50.00</p>
        </div>
        <div class="col-4">
            <img src="~/assets/images/product-11.jpg" alt="">
            <h4>Red Printed Tshirt</h4>
            <div class="rating">
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star-half-o"></i>
            </div>
            <p>$50.00</p>
        </div>
        <div class="col-4">
            <img src="~/assets/images/product-12.jpg" alt="">
            <h4>Red Printed Tshirt</h4>
            <div class="rating">
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star"></i>
                <i class="fa fa-star-o"></i>
            </div>
            <p>$50.00</p>
        </div>
    </div>


</div>







<script>
    var ProductImg = document.getElementById("ProductImg");
    var SmallImg = document.getElementsByClassName("small-img");

    SmallImg[0].onclick = function () {
        ProductImg.src = SmallImg[0].src;
    }
    SmallImg[1].onclick = function () {
        ProductImg.src = SmallImg[1].src;
    }
    SmallImg[2].onclick = function () {
        ProductImg.src = SmallImg[2].src;
    }
    SmallImg[3].onclick = function () {
        ProductImg.src = SmallImg[3].src;
    }

</script>



<script>
    const form = document.querySelector('.js-login-form')
    const user = document.querySelector('.js-user')
    const closeForm = document.querySelector('.js-close')

    function showFormLogin() {
        form.classList.add('open')
    }

    function hideFormLogin() {
        form.classList.remove('open')
    }

    user.addEventListener('click', showFormLogin)
    closeForm.addEventListener('click', hideFormLogin)

</script>

